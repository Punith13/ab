var resumeApp=angular.module("resumeApp",["ngRoute"]);resumeApp.controller("maincontroller",["$scope","$location","timelineMenuService","mapService",function(a,b,c,d){c.getTimelineData(),a.$on("timeLineMenuBar",function(b,c){a.menu=c,a.mapShow=!0,d.initMap(a.menu[0].lat,a.menu[0].lng,a.menu[0].rad)}),a.selectStopPoint=function(c){console.log(c);for(var e=[],f=0;f<a.menu.length;f++)f<=parseInt(c)?(a.menu[f].focus=!0,e.push(a.menu[f])):a.menu[f].focus=!1;d.mapSettings(c,e),$(".progress-bar").css("width",parseInt(a.menu[c].progressBarWidth)+1+"%"),c>=8?a.mapShow=!1:a.mapShow=!0,b.path(a.menu[c].path)},a.toAddClass=function(){var b="";return a.mapShow?b="col span-1-of-2 ":b}}]),resumeApp.controller("modalController",["$scope","$location","emailService",function(a,b,c){b.path("/"),a.modalVisible=!1,a.connectForm={},a.sendingMail=!1,a.headerMsg="Contact Details:",a.hireMe=function(){a.modalVisible=!0},a.closeModal=function(){a.modalVisible=!1},a.sendMail=function(){c.sendMail(a.connectForm),a.sendingMail=!0,a.headerMsg="Email Status:",a.mailStatus="Sending mail, Please wait..."},a.$on("mailSentSuccess",function(b,c){a.mailStatus="Thanks for your interest, I will revert shortly.",setTimeout(function(){a.modalVisible=!1,a.sendingMail=!1,a.headerMsg="Contact Details:",a.connectForm={},a.$apply()},1500)})}]),resumeApp.directive("timelineStopPoint",function(){return{restrict:"E",replace:!0,templateUrl:"/resources/directive/timeline-stop-point.htm",scope:{menuObj:"=",highlightClicked:"&"},link:function(a,b,c){b.css("margin-left",a.menuObj.progressBarWidth+"%")}}}),resumeApp.config(["$routeProvider",function(a){a.when("/",{templateUrl:"/resources/pages/education.htm"}).when("/internship",{templateUrl:"/resources/pages/internship.htm"}).when("/hyderabad",{templateUrl:"/resources/pages/hyderabad.htm"}).when("/delhi",{templateUrl:"/resources/pages/delhi.htm"}).when("/jakarta",{templateUrl:"/resources/pages/jakarta.htm"}).when("/dubai",{templateUrl:"/resources/pages/dubai.htm"}).when("/sweden",{templateUrl:"/resources/pages/sweden.htm"}).when("/bangalore",{templateUrl:"/resources/pages/bangalore.htm"}).when("/sample",{templateUrl:"/resources/pages/sample.htm"}).when("/certificates",{templateUrl:"/resources/pages/certificates.htm"})}]),resumeApp.service("emailService",["$rootScope","$http",function(a,b){this.sendMail=function(c){b.post("/sendMail",{mailBody:c}).success(function(b){console.log("Mail sent successfully"),a.$broadcast("mailSentSuccess")}).error(function(a,b){console.log(b)})}}]),resumeApp.service("mapService",function(){var a,b=this,c=[],d=[];google.maps.Circle.prototype.changeRadInterval=function(b,c){var d=this,e=0;d.flag=c,d.setInter=setInterval(function(){if(d.setMap(null),d.flag>0){switch(e){case 0:d.radius=b;break;case 1:d.radius=2*b;break;case 2:d.radius=3*b}d.setMap(a),e++,e>2&&(e=0)}},1e3),0==c&&clearInterval(d.setInter)},b.initMap=function(b,d,e){a=new google.maps.Map(document.getElementById("map-area"),{zoom:15,center:{lat:b,lng:d}});var f=new google.maps.Circle({strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:a,center:{lat:b,lng:d},radius:e});f.changeRadInterval(e,1),c.push(f)},b.mapSettings=function(b,e){console.log("reached mapsettings "+b);for(var f=0;f<c.length;f++)c[f].changeRadInterval(0,0),c[f].setMap(null);c=[];for(var f=0;f<d.length;f++)d[f].setMap(null);d=[],a.setCenter({lat:e[b].cnLat,lng:e[b].cnLng}),a.setZoom(e[b].zoom);var g=new google.maps.Circle({strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:a,center:{lat:e[b].lat,lng:e[b].lng},radius:e[b].rad});g.changeRadInterval(e[b].rad,1),c.push(g);for(var h={path:"M 0,-1 0,1",strokeOpacity:1,scale:4},f=1;f<e.length;f++){var i=new google.maps.Polyline({path:[{lat:e[f-1].lat,lng:e[f-1].lng},{lat:e[f].lat,lng:e[f].lng}],strokeOpacity:0,icons:[{icon:h,offset:"0",repeat:"20px"}],geodesic:!0,map:a});d.push(i)}}}),resumeApp.service("timelineMenuService",["$rootScope","$http",function(a,b){this.getTimelineData=function(){b.get("/getTimeline").success(function(b){a.$broadcast("timeLineMenuBar",b)}).error(function(a,b){console.log(b)})}}]);